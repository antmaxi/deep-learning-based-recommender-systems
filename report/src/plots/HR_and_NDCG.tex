% Plot HR vs k, for best tuned models and for k=1,...,10, for all datasets
% \pgfplotstabletypeset{data.dat}

% Note about .dat file formating.
% Should have 3 columns, i.e.:
% k HR NDCG
% The k is ranging from 1 to 10.
% The respective Hit Ratios under HR.
% The respective NDCGs under NDCG.
\begin{figure*}[t]
    \centering
    %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
    %%%%%% Hit Ratio - Movielens %%%%%%
    %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
    \begin{subfigure}[ht]{0.32\textwidth}
        \centering
        \begin{tikzpicture}[scale=0.5]
        \begin{axis}[tick style={line width=0.6pt}, ymajorgrids, xlabel=k,ylabel=HR@k, legend pos=south east, legend style={at={(0.5,+1.6)},anchor=north}]
        \addplot table [x=k, y=HR]{results/movielens_gmf.dat};
        \addlegendentry{GMF(32)}
        \addplot table [x=k, y=HR]{results/movielens_mlp.dat};
        \addlegendentry{MLP(4)}
        \addplot table [x=k, y=HR]{results/movielens_neumf.dat};
        \addlegendentry{NeuMF(32,2)}
        \addplot table [x=k, y=HR]{results/movielens_ngcf.dat};
        \addlegendentry{NGCF(64)}
        \addplot table [x=k, y=HR]{results/movielens_vae.dat};
        \addlegendentry{VAE(20ep)}
        \addplot table [x=k, y=HR]{results/movielens_ensemble.dat};
        \addlegendentry{Ensemble}
        \addplot table [x=k, y=HR]{results/movielens_cmn.dat};
         \addlegendentry{CMN(64)}
        \end{axis}
        \end{tikzpicture}
        %\caption{Movielens}
    \end{subfigure}
    %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
    %%%%%%% Hit Ratio - Jester %%%%%%%%
    %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
    \begin{subfigure}[ht]{0.32\textwidth}
        \centering
        \begin{tikzpicture}[scale=0.5]
        \begin{axis}[tick style={line width=0.6pt}, ymajorgrids, xlabel=k,ylabel=HR@k, legend style={at={(0.5,+1.6)},anchor=north}]
        \addplot table [x=k, y=HR]{results/jester_gmf.dat};
        \addlegendentry{GMF(16)}
        \addplot table [x=k, y=HR]{results/jester_mlp.dat};
        \addlegendentry{MLP(3)}
        \addplot table [x=k, y=HR]{results/jester_neumf.dat};
        \addlegendentry{NeuMF(8,2)}
        \addplot table [x=k, y=HR]{results/jester_ngcf.dat};
        \addlegendentry{NGCF(32)}
        \addplot table [x=k, y=HR]{results/jester_vae.dat};
        \addlegendentry{VAE(20ep)}
        \addplot table [x=k, y=HR]{results/jester_ensemble.dat};
        \addlegendentry{Ensemble}
        \end{axis}
        \end{tikzpicture}
        %\caption{Jester}
    \end{subfigure}
    %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
    %%%%% Hit Ratio - Epinions %%%%%%%%%
    %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
    \begin{subfigure}[ht]{0.32\textwidth}
        \centering
        \begin{tikzpicture}[scale=0.5]
        \begin{axis}[tick style={line width=0.6pt}, ymajorgrids, xlabel=k,ylabel=HR@k, legend style={at={(0.5,+1.6)},anchor=north}]
        \addplot table [x=k, y=HR]{results/epinions_gmf.dat};
        \addlegendentry{GMF(64)}
        \addplot table [x=k, y=HR]{results/epinions_mlp.dat};
        \addlegendentry{MLP(2)}
        \addplot table [x=k, y=HR]{results/epinions_neumf.dat};
        \addlegendentry{NeuMF(32,2)}
        \addplot table [x=k, y=HR]{results/epinions_ngcf.dat};
        \addlegendentry{NGCF(8)}
        \addplot table [x=k, y=HR]{results/epinions_vae.dat};
        \addlegendentry{VAE(2ep)}
        \addplot table [x=k, y=HR]{results/epinions_ensemble.dat};
        \addlegendentry{Ensemble}
        \addplot table [x=k, y=HR]{results/epinions_cmn.dat};
        \addlegendentry{CMN(8)}
        \end{axis}
        \end{tikzpicture}
        %\caption{Epinions}
    \end{subfigure} 

    %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
    %%%%%%%%% NDCG - Movielens %%%%%%%%%
    %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
    \begin{subfigure}[ht]{0.32\textwidth}
        \centering
        \begin{tikzpicture}[scale=0.5]
          \begin{axis}[tick style={line width=0.6pt}, ymajorgrids, xlabel=k,ylabel=NDCG@k]
        \addplot table [x=k, y=NDCG]{results/movielens_gmf.dat};
        %\addlegendentry{GMF(32)}
        \addplot table [x=k, y=NDCG]{results/movielens_mlp.dat};
        %\addlegendentry{MLP(4)}
        \addplot table [x=k, y=NDCG]{results/movielens_neumf.dat};
        %\addlegendentry{NeuMF(32,2)}
        \addplot table [x=k, y=NDCG]{results/movielens_ngcf.dat};
        %\addlegendentry{NGCF(64)}
        \addplot table [x=k, y=NDCG]{results/movielens_vae.dat};
        %\addlegendentry{VAE(20ep)}
        \addplot table [x=k, y=NDCG]{results/movielens_ensemble.dat};
        %\addlegendentry{Ensemble}
        \addplot table [x=k, y=NDCG]{results/movielens_cmn.dat};
        %\addlegendentry{CMN}
        \end{axis}
        \end{tikzpicture}
        \caption{Movielens}
    \end{subfigure}
    %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
    %%%%%%%%%% NDCG - Jester %%%%%%%%%%
    %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
    \begin{subfigure}[ht]{0.32\textwidth}
        \centering
        \begin{tikzpicture}[scale=0.5]
        \begin{axis}[tick style={line width=0.6pt}, ymajorgrids, xlabel=k,ylabel=NDCG@k, legend pos=south east]
        \addplot table [x=k, y=NDCG]{results/jester_gmf.dat};
        %\addlegendentry{GMF(16)}
        \addplot table [x=k, y=NDCG]{results/jester_mlp.dat};
        %\addlegendentry{MLP(3)}
        \addplot table [x=k, y=NDCG]{results/jester_neumf.dat};
        %\addlegendentry{NeuMF(8,2)}
        \addplot table [x=k, y=NDCG]{results/jester_ngcf.dat};
        %\addlegendentry{NGCF(32)}
        \addplot table [x=k, y=NDCG]{results/jester_vae.dat};
        %\addlegendentry{VAE(20ep)}
        \addplot table [x=k, y=NDCG]{results/jester_ensemble.dat};
        %\addlegendentry{Ensemble}
        \end{axis}
        \end{tikzpicture}
        \caption{Jester}        %
    \end{subfigure}
    %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
    %%%%%%%%% NDCG - Epinions %%%%%%%%%%
    %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
    \begin{subfigure}[ht]{0.32\textwidth}
        \centering
        \begin{tikzpicture}[scale=0.5]
        \begin{axis}[tick style={line width=0.6pt}, ymajorgrids, xlabel=k,ylabel=NDCG@k, legend pos=south east]
        \addplot table [x=k, y=NDCG]{results/epinions_gmf.dat};
        %\addlegendentry{GMF(64)}
        \addplot table [x=k, y=NDCG]{results/epinions_mlp.dat};
        %\addlegendentry{MLP(2)}
        \addplot table [x=k, y=NDCG]{results/epinions_neumf.dat};
        %\addlegendentry{NeuMF(32,2)}
        \addplot table [x=k, y=NDCG]{results/epinions_ngcf.dat};
        %\addlegendentry{NGCF(8)}
        \addplot table [x=k, y=NDCG]{results/epinions_vae.dat};
        %\addlegendentry{VAE(2ep)}
        \addplot table [x=k, y=NDCG]{results/epinions_ensemble.dat};
        %\addlegendentry{Ensemble}
        \addplot table [x=k, y=NDCG]{results/epinions_cmn.dat};
        %\addlegendentry{CMN(8)}
        \end{axis}
        \end{tikzpicture}
        \caption{Epinions}
    \end{subfigure} 
    \caption{Evaluation of top k item recommendation, where k ranges from 1 to 10 on the three datasets.}
    \label{fig:metrics}
\end{figure*}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../../report"
%%% End:
